<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Website</title>
    <link rel="stylesheet" href="/css/main.css">
    <style>
        /* ========== –ü–ò–ö–°–ï–õ–¨–ù–´–ï –ê–ù–ò–ú–ê–¶–ò–ò ========== */
        @keyframes pixelPulse {
            0% { transform: scale(1); filter: brightness(1); }
            25% { transform: scale(1.03); filter: brightness(1.1); }
            50% { transform: scale(1.05); filter: brightness(1.2); }
            75% { transform: scale(1.03); filter: brightness(1.1); }
            100% { transform: scale(1); filter: brightness(1); }
        }

        @keyframes pixelGlow {
            0%, 100% { 
                box-shadow: 0 0 5px #4fc3f7,
                            inset 0 0 5px rgba(79, 195, 247, 0.3);
            }
            50% { 
                box-shadow: 0 0 20px #4fc3f7, 
                            0 0 30px #ffcc80,
                            inset 0 0 10px rgba(255, 204, 128, 0.5);
            }
        }

        @keyframes pixelFloat {
            0%, 100% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-8px) translateX(2px); }
            50% { transform: translateY(-12px) translateX(-1px); }
            75% { transform: translateY(-8px) translateX(1px); }
        }

        @keyframes pixelShake {
            0%, 100% { transform: translateX(0) rotate(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-2px) rotate(-0.5deg); }
            20%, 40%, 60%, 80% { transform: translateX(2px) rotate(0.5deg); }
        }

        @keyframes pixelSnowfall {
            0% { transform: translateY(-100px) translateX(0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 0.8; }
            100% { transform: translateY(100vh) translateX(20px) rotate(360deg); opacity: 0; }
        }

        @keyframes pixelBounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-15px); }
            60% { transform: translateY(-7px); }
        }

        @keyframes pixelFlicker {
            0%, 18%, 22%, 25%, 53%, 57%, 100% { opacity: 1; filter: brightness(1); }
            20%, 24%, 55% { opacity: 0.8; filter: brightness(1.3); }
        }

        @keyframes pixelSpin {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }

        @keyframes pixelHeartbeat {
            0%, 100% { transform: scale(1); }
            10%, 30% { transform: scale(1.1); }
            20%, 40% { transform: scale(1.05); }
            50% { transform: scale(1.15); }
        }

        @keyframes gradientMove {
            0% { background-position: 0% 0%; }
            100% { background-position: 200% 0%; }
        }

        @keyframes buttonGlow {
            0%, 100% { box-shadow: 0 0 5px #64B5F6, 0 8px 20px rgba(33, 150, 243, 0.3); }
            50% { box-shadow: 0 0 15px #64B5F6, 0 8px 25px rgba(33, 150, 243, 0.5); }
        }

        /* ========== –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ú–ò–ù–ò-–ö–í–ï–°–¢–ê ========== */
        .mini-quest-section {
            margin-top: 50px;
            padding-top: 30px;
            border-top: 3px dashed #4fc3f7;
            text-align: center;
        }

        .section-title {
            color: #FFD700;
            font-size: 28px;
            font-family: "Pixelify Sans", sans-serif;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .section-subtitle {
            color: #bbdefb;
            font-size: 16px;
            margin-bottom: 30px;
        }

        .mini-quest-card {
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid #4fc3f7;
            box-shadow: 0 10px 30px rgba(79, 195, 247, 0.2);
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            max-width: 500px;
            margin: 0 auto;
        }

        .mini-quest-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, #4fc3f7, #ffcc80, #4fc3f7);
            background-size: 200% 100%;
            animation: gradientMove 3s linear infinite;
        }

        .quest-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .quest-icon {
            font-size: 50px;
            animation: pixelFloat 3s ease-in-out infinite;
        }

        .quest-title-content {
            text-align: center;
        }

        .quest-main-title {
            font-size: 24px;
            font-weight: bold;
            color: #4fc3f7;
            font-family: "Pixelify Sans", sans-serif;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
        }

        .quest-date {
            font-size: 14px;
            color: #ffcc80;
            font-weight: bold;
        }

        .quest-description {
            background: rgba(79, 195, 247, 0.1);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid #4fc3f7;
            border-right: 4px solid #4fc3f7;
        }

        .quest-description p {
            color: #e0e0ff;
            font-size: 16px;
            line-height: 1.6;
            margin: 0;
        }

        .quest-info-simple {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 25px;
        }

        .info-item-simple {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 204, 128, 0.1);
            padding: 10px 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 204, 128, 0.3);
        }

        .info-icon-simple {
            font-size: 18px;
            color: #ffcc80;
        }

        .info-text-simple {
            color: #ffcc80;
            font-size: 14px;
            font-weight: bold;
        }

        .quest-status-container {
            margin-bottom: 25px;
        }

        .quest-status {
            display: inline-block;
            background: rgba(255, 140, 0, 0.2);
            color: #ffa500;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 16px;
            border: 2px solid #ffa500;
            box-shadow: 0 0 15px rgba(255, 165, 0, 0.3);
        }

        /* ========== –£–õ–£–ß–®–ï–ù–ù–ê–Ø –ö–ù–û–ü–ö–ê ========== */
        .quest-button-container {
            padding: 10px 0;
        }

        .quest-button-new {
            display: block;
            background: linear-gradient(145deg, #2196F3, #1976D2);
            color: white;
            padding: 18px 25px;
            border-radius: 12px;
            text-decoration: none;
            font-family: "Pixelify Sans", sans-serif;
            font-size: 18px;
            font-weight: bold;
            border: 2px solid #64B5F6;
            box-shadow: 0 8px 20px rgba(33, 150, 243, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            text-align: center;
            width: 100%;
            animation: buttonGlow 2s infinite;
        }

        .quest-button-new:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(33, 150, 243, 0.5);
            border-color: #90CAF9;
            background: linear-gradient(145deg, #2196F3, #0D47A1);
            animation: none;
        }

        .quest-button-new::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.7s ease;
        }

        .quest-button-new:hover::before {
            left: 100%;
        }

        .quest-button-new .button-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            position: relative;
            z-index: 1;
        }

        .quest-button-new .button-icon-new {
            font-size: 22px;
            flex-shrink: 0;
        }

        .quest-button-new .button-text-new {
            flex: 1;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding: 0 5px;
        }

        /* ========== –£–ù–ò–ö–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –≠–¢–û–ô –°–¢–†–ê–ù–ò–¶–´ ========== */

        /* –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ hero--info */
        .hero.container {
            position: relative;
            min-height: 500px;
        }

        .hero--info {
            position: absolute;
            top: 300px;
            right: 32px;
            width: 45%;
            max-width: 600px;
            background: rgba(20, 30, 60, 0.85);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(79, 195, 247, 0.3);
            z-index: 10;
            transition: transform 0.3s ease;
        }

        .hero--info:hover {
            transform: translateY(-5px);
        }

        .hero--info h2 {
            color: #4fc3f7;
            font-size: 28px;
            margin-bottom: 15px;
            text-shadow: 0 0 8px rgba(79, 195, 247, 0.5);
            font-family: "Pixelify Sans", sans-serif;
        }

        .hero--info h1 {
            color: #ffffff;
            font-size: 24px;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .hero--info p {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #e0e0ff;
        }

        /* –ö—É—Ä—Å–æ—Ä –º–∏–≥–∞—é—â–∏–π –¥–ª—è typewriter —ç—Ñ—Ñ–µ–∫—Ç–∞ */
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .typing-cursor {
            display: inline-block;
            width: 3px;
            height: 1em;
            background-color: #4fc3f7;
            margin-left: 2px;
            vertical-align: middle;
            animation: blink 1s infinite;
        }

        .blinking-cursor {
            animation: blink 1s infinite;
            opacity: 1;
            font-weight: bold;
            color: #ffcc80;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –ø–ª–∞–≤–∞—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω */
        .modal-content {
            animation: pixelFadeInUp 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes pixelFadeInUp {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* –†–µ—Å–ø–æ–Ω—Å–∏–≤ —Å—Ç–∏–ª–∏ –¥–ª—è hero--info */
        @media (max-width: 1024px) {
            .hero--info {
                position: relative;
                top: auto;
                right: auto;
                width: 90%;
                max-width: 90%;
                margin: 30px auto;
            }
            
            .hero.container {
                min-height: auto;
                padding-top: 100px;
            }
        }

        /* –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (max-width: 768px) {
            .mini-quest-card {
                padding: 20px;
                max-width: 95%;
            }
            
            .quest-main-title {
                font-size: 20px;
            }
            
            .quest-description p {
                font-size: 15px;
            }
            
            .quest-info-simple {
                flex-direction: column;
                gap: 10px;
                align-items: center;
            }
            
            .info-item-simple {
                width: 80%;
                justify-content: center;
            }
            
            .quest-button-new {
                padding: 16px 20px;
                font-size: 16px;
            }
            
            .quest-button-new .button-text-new {
                font-size: 15px;
            }
        }

        @media (max-width: 480px) {
            .quest-button-new {
                padding: 14px 15px;
                font-size: 15px;
            }
            
            .quest-button-new .button-content {
                flex-direction: column;
                gap: 8px;
            }
            
            .quest-button-new .button-text-new {
                white-space: normal;
                text-overflow: clip;
                line-height: 1.3;
            }
            
            .quest-status {
                font-size: 14px;
                padding: 8px 20px;
            }
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(145deg, #2196F3, #0D47A1);
            color: white;
            padding: 12px 25px;
            border-radius: 10px;
            text-decoration: none;
            border: 2px solid #64B5F6;
            font-family: "Pixelify Sans", sans-serif;
            font-size: 16px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
            margin: 20px 0;
        }

        .back-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
            background: linear-gradient(145deg, #1976D2, #0D47A1);
        }

        .button-icon {
            font-size: 20px;
            animation: bounceLeft 2s infinite;
        }

        .button-glow {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .back-button:hover .button-glow {
            left: 100%;
        }

        @keyframes bounceLeft {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(-3px); }
        }

        /* ========== –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ô –§–û–ù –î–õ–Ø –†–ê–ó–î–ï–õ–ê "–ï–ì–û –ü–£–¢–¨" ========== */
        .story-section {
            background: url('img/Fon Ego pyt.png') center center / cover no-repeat !important;
            background-color: transparent !important;
            background-image: url('img/Fon Ego pyt.png') !important;
            background-position: center center !important;
            background-size: cover !important;
            background-repeat: no-repeat !important;
            
            position: relative;
            min-height: 600px;
            padding: 100px 0;
            display: flex;
            align-items: center;
            overflow: hidden;
        }

        /* –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) */
        .story-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 25, 45, 0.6);
            z-index: 1;
        }

        /* –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–≤–µ—Ä—Ö —Ñ–æ–Ω–∞ */
        .story-section .container,
        .story-section .story-content {
            position: relative;
            z-index: 2;
        }

        /* –î–µ–ª–∞–µ–º —Ç–µ–∫—Å—Ç –±–µ–ª—ã–º –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ –Ω–∞ —Ñ–æ–Ω–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
        .story-section .story-title {
            color: #ffffff !important;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .story-section .story-text p {
            color: #f0f0ff !important;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤ —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ */
        .story-section .story-btn {
            background: rgba(79, 195, 247, 0.9) !important;
            border-color: #ffffff !important;
        }

        .story-section .story-btn:hover {
            background: rgba(79, 195, 247, 1) !important;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3) !important;
        }

        #advent-section {
            background-color: #0d47a1 !important;
            min-height: 600px !important;
            background-image: url('img/Fon section advent.png') !important;
            background-size: cover !important;
            background-position: center !important;
            background-repeat: no-repeat !important;
            background-blend-mode: multiply;
        }

        /* –Ø—Ä–∫–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ */
        #advent-section {
            border: 5px solid #4fc3f7 !important;
        }

        /* ========== –ê–£–î–ò–û –ö–û–ù–¢–†–û–õ–õ–ï–† ========== */
        .audio-controller {
            position: fixed;
            top: 120px;
            right: 20px;
            z-index: 1000;
            background: rgba(15, 25, 45, 0.9);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid #4fc3f7;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            min-width: 180px;
            animation: slideInRight 0.5s ease-out;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .audio-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .audio-icon {
            font-size: 20px;
            color: #4fc3f7;
        }

        .audio-title {
            color: #fff;
            font-family: "Pixelify Sans", sans-serif;
            font-size: 14px;
            margin: 0;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .volume-slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            background: linear-gradient(to right, #4fc3f7, #ffcc80);
            border-radius: 3px;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #4fc3f7;
            cursor: pointer;
            border: 2px solid #fff;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
        }

        .volume-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #4fc3f7;
            cursor: pointer;
            border: 2px solid #fff;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
        }

        .volume-value {
            color: #ffcc80;
            font-family: "Pixelify Sans", sans-serif;
            font-size: 14px;
            min-width: 35px;
            text-align: center;
        }

        .audio-buttons {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .audio-btn {
            flex: 1;
            background: rgba(79, 195, 247, 0.3);
            border: 1px solid #4fc3f7;
            color: #fff;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            font-family: "Pixelify Sans", sans-serif;
            font-size: 12px;
            transition: all 0.3s;
        }

        .audio-btn:hover {
            background: rgba(79, 195, 247, 0.5);
            transform: translateY(-2px);
        }

        .audio-btn.active {
            background: #4fc3f7;
            color: #0d1b2a;
        }

        .audio-toggle {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 1001;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(15, 25, 45, 0.9);
            border: 2px solid #4fc3f7;
            color: #4fc3f7;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .audio-toggle:hover {
            background: rgba(79, 195, 247, 0.3);
            transform: scale(1.1);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–π–º–µ—Ä–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ */
        .day-timer {
            font-size: 11px;
            color: #FFD700;
            margin-top: 5px;
            font-family: 'Courier New', monospace;
            text-align: center;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.7);
            font-weight: bold;
        }

        .day-date {
            font-size: 12px;
            color: #FFA500;
            margin-bottom: 5px;
            text-align: center;
            font-weight: bold;
            text-shadow: 0 0 3px rgba(255, 165, 0, 0.5);
        }

        /* –î–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–Ω–µ–π */
        .day-card.locked .day-date {
            color: #FF8C00;
            text-shadow: 0 0 5px rgba(255, 140, 0, 0.7);
        }

        /* –î–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–Ω–µ–π */
        .day-card.available .day-date {
            color: #4fc3f7;
        }

        /* –î–ª—è –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö –¥–Ω–µ–π */
        .day-card.completed .day-date {
            color: #32CD32;
        }
        
    </style>
</head>

<body>
<!-- –ê—É–¥–∏–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä -->
<div class="audio-toggle" id="audioToggle">‚ô™</div>

<div class="audio-controller" id="audioController" style="display: none;">
    <div class="audio-header">
        <div class="audio-icon">üéµ</div>
        <h3 class="audio-title">–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞</h3>
    </div>
    
    <div class="volume-control">
        <span style="color: #fff; font-size: 12px;">üîà</span>
        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="30">
        <span style="color: #fff; font-size: 12px;">üîä</span>
        <span class="volume-value" id="volumeValue">30%</span>
    </div>
    
    <div class="audio-buttons">
        <button class="audio-btn" id="playBtn">‚ñ∂Ô∏è –í–∫–ª</button>
        <button class="audio-btn" id="pauseBtn">‚è∏Ô∏è –í—ã–∫–ª</button>
        <button class="audio-btn" id="muteBtn">üîá –¢–∏—Ö–æ</button>
    </div>
</div>

<!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç -->
<audio id="backgroundMusic" loop>
    <source src="audio/Spa Music Paradise Zone, Ambient Music Collective, Wellnes - Ocean Waves Spa Music [audiovk.com].mp3" type="audio/mpeg">
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç.
</audio>

<div class="wrapper">
    <!-- –ü–µ—Ä–≤—ã–π —ç–∫—Ä–∞–Ω —Å –º–µ–Ω—é -->
    <div class="main-screen">
        <header class="container">
            <nav id="mainMenu">
                <ul>
                    <li class="active"><a href="#advent-section">–ì–ª–∞–≤–Ω–∞—è –∫–∞—Ä—Ç–∞</a></li>
                    <li><a href="#character-page">–ü–µ—Ä—Å–æ–Ω–∞–∂</a></li>
                    <li><a href="#story-section">–ê—Ä—Ö–∏–≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</a></li>
                    <li><a href="#about">–û–± –∏–≥—Ä–µ</a></li>
                    <li><a href="#news">–ó–∏–º–Ω–∏–µ –≤–µ—Å—Ç–∏</a></li>
                    <!-- –î–û–ë–ê–í–õ–Ø–ï–ú –∫–Ω–æ–ø–∫—É –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è -->
                    <li class="btn inventory-btn">
                        <a href="inventory.html" class="inventory-menu-link">
                            <span class="inventory-icon">üéí</span>
                            –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
                            <span class="inventory-count" id="inventoryCount">0</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </header>
  
        <div class="hero container">
            <div class="hero--info">
                <h2>–¢–≤–æ–µ –∑–∏–º–Ω–µ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ —É–∂–µ –∂–¥—ë—Ç —Ç–µ–±—è</h2>
                <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä, –≥–¥–µ —Ç—ã ‚Äî –≥–µ—Ä–æ–π —ç—Ç–æ–π –∑–∏–º–Ω–µ–π –∏—Å—Ç–æ—Ä–∏–∏</h1>
                <p>–°–æ–±—Ä–∞–ª–∞ –¥–ª—è —Ç–µ–±—è –º–∞–ª–µ–Ω—å–∫–∏–π –ø–∏–∫—Å–µ–ª—å–Ω—ã–π –º–∏—Ä. –ë–µ–≥–∏, –∏—Å—Å–ª–µ–¥—É–π, –≤—ã–ø–æ–ª–Ω—è–π –∑–∞–¥–∞–Ω–∏—è</p>
                
                <button class="bth" id="startJourneyBtn">
                    <div class="bth-glow"></div>
                    <div class="bth-content">
                        <span class="bth-icon">üéÆ</span>
                        –ù–∞—á–∞—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ
                        <div class="bth-sparkles">
                            <span class="sparkle">‚ú®</span>
                            <span class="sparkle">‚≠ê</span>
                            <span class="sparkle">‚ú®</span>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <section class="character-page" id="character-page">
        <div class="pixel-snow"></div>
        <div class="mountain-silhouette"></div>
        <div class="village-lights"></div>
        
        <div class="container">
            <!-- –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <div class="character-header">
                <h1 class="pixel-title">
                    <span class="title-main">–ù–∏–∫</span>
                    <span class="title-sub"> ‚Äì —Ç–æ—Ç, –∫—Ç–æ –∏–¥—ë—Ç –≤–ø–µ—Ä—ë–¥</span>
                </h1>
                <div class="pixel-divider">
                    <div class="pixel-block"></div>
                    <div class="pixel-block"></div>
                    <div class="pixel-block"></div>
                    <div class="pixel-block"></div>
                </div>
            </div>
            
            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –¥–≤–µ –∫–æ–ª–æ–Ω–∫–∏ -->
            <div class="character-content-simple">
                <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –∞–≤–∞—Ç–∞—Ä –∏ —Å—Ç–∞—Ç—ã -->
                <div class="character-left-simple">
                    <div class="sprite-frame-simple">
                        <div class="sprite-character-simple" id="nick-sprite-simple"></div>
                        <div class="sprite-shadow-simple"></div>
                    </div>
                    
                    <div class="character-stats-simple">
                        <div class="stat-item-simple">
                            <span class="stat-label-simple">–°—Ç–æ–π–∫–æ—Å—Ç—å</span>
                            <div class="stat-bar-simple">
                                <div class="stat-fill-simple" style="width: 85%"></div>
                            </div>
                            <span class="stat-value-simple">85/100</span>
                        </div>
                        
                        <div class="stat-item-simple">
                            <span class="stat-label-simple">–ù–∞–¥–µ–∂–¥–∞</span>
                            <div class="stat-bar-simple">
                                <div class="stat-fill-simple" style="width: 70%"></div>
                            </div>
                            <span class="stat-value-simple">70/100</span>
                        </div>
                        
                        <div class="stat-item-simple">
                            <span class="stat-label-simple">–°–∏–ª–∞ –≤–æ–ª–∏</span>
                            <div class="stat-bar-simple">
                                <div class="stat-fill-simple" style="width: 95%"></div>
                            </div>
                            <span class="stat-value-simple">95/100</span>
                        </div>
                    </div>
                </div>
                
                <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ -->
                <div class="character-right-simple">
                    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ "–ß—Ç–æ —É–∑–Ω–∞—Ç—å –æ –ù–∏–∫–µ?" -->
                    <div class="description-header-simple">
                        <h2 class="section-title-simple">
                            <span class="pixel-icon-simple">‚ùì</span>
                            –ß—Ç–æ —É–∑–Ω–∞—Ç—å –æ –ù–∏–∫–µ?
                        </h2>
                        <div class="title-decoration-simple"></div>
                    </div>
                    
                    <!-- –ë–ª–æ–∫ –¥–ª—è –ø–µ—á–∞—Ç–∞—é—â–µ–≥–æ—Å—è —Ç–µ–∫—Å—Ç–∞ -->
                    <div class="text-container-simple">
                        <div class="typewriter-box" id="typewriterBox">
                            <!-- –¢–µ–∫—Å—Ç –±—É–¥–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –ø–µ—á–∞—Ç–∏ -->
                            <p id="typewriterText" class="typewriter-text-simple"></p>
                            <div class="typing-cursor">|</div>
                        </div>
                    </div>
                    
                    <!-- –ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ -->
                    <div class="choice-buttons-simple">
                        <button class="choice-btn" data-choice="talk">
                            <span class="choice-icon">üí¨</span>
                            –ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å –ù–∏–∫–æ–º
                        </button>
                        
                        <button class="choice-btn" data-choice="village">
                            <span class="choice-icon">üè°</span>
                            –£–∑–Ω–∞—Ç—å –æ –¥–µ—Ä–µ–≤–Ω–µ
                        </button>
                        
                        <button class="choice-btn" data-choice="blade">
                            <span class="choice-icon">üó°Ô∏è</span>
                            –°–ø—Ä–æ—Å–∏—Ç—å –æ –∫–ª–∏–Ω–∫–µ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="story-section" id="story-section">
        <div class="container">
            <div class="story-content">
                <h2 class="story-title"># –ï–≥–æ –ø—É—Ç—å</h2>
                
                <div class="story-text">
                    <p>–†–∞–Ω—å—à–µ –ù–∏–∫ –±—ã–ª –ø—Ä–æ—Å—Ç–æ –º–∞–ª—å—á–∏–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π –±—Ä–æ–¥–∏–ª –ø–æ –ª–µ—Å—É –∏ —Å–æ–±–∏—Ä–∞–ª –∑–∞—Å–Ω–µ–∂–µ–Ω–Ω—ã–µ –≤–µ—Ç–æ—á–∫–∏, —á—Ç–æ–±—ã –¥–µ–ª–∞—Ç—å –∏–∑ –Ω–∏—Ö —Å–≤–µ—Ç—è—â–∏–µ—Å—è –∏–≥—Ä–∏—à–∫–∏.</p>
                    
                    <p>–ù–æ –æ–¥–Ω–∞–∂–¥—ã –æ–Ω –Ω–∞—à—ë–ª —Å—Ç—Ä–∞–Ω–Ω—ã–π –∫–ª–∏–Ω–æ–∫, —Å–∫—Ä—ã—Ç—ã–π –ø–æ–¥ –ª—ë–¥–æ–º.<br>
                    –õ–µ–∑–≤–∏–µ –Ω–µ –æ—Ç—Ä–∞–∂–∞–ª–æ —Å–≤–µ—Ç ‚Äì –æ–Ω–æ –±—É–¥—Ç–æ —Å–∞–º–æ —Å–≤–µ—Ç–∏–ª–æ—Å—å –∏–∑–Ω—É—Ç—Ä–∏, –∫–∞–∫ –∑–≤–µ–∑–¥–∞, —É–ø–∞–≤—à–∞—è –Ω–∞ –∑–µ–º–ª—é. –¢–µ–ø–µ—Ä—å –∫–ª–∏–Ω–æ–∫ –æ—Ç–∫–ª–∏–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –µ–≥–æ —Ä—É–∫–∏.<br>
                    –¢–µ–ø–ª–æ, –±—É–¥—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç:<br>
                    "–ù–µ –±–æ–π—Å—è. –Ø —Å —Ç–æ–±–æ–π."</p>
                </div>
                
                <div class="story-buttons">
                    <a href="blade-details.html" class="story-btn sword-btn">
                        –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–ª–∏–Ω–æ–∫
                        <span class="btn-icon">üó°Ô∏è</span>
                    </a>
                </div>
                
                <div class="sword-visual">
                    <div class="sword-glow"></div>
                    <div class="sword-icon">üó°Ô∏è</div>
                    <div class="ice-effect"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- –ê–î–í–ï–ù–¢-–ö–ê–õ–ï–ù–î–ê–†–¨ 5 –î–ù–ï–ô -->
<section class="advent-section" id="advent-section">
    <div class="container">
        <div class="advent-calendar">
            <h2 class="advent-title">‚ùÑÔ∏è –ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ: <span id="daysCounter">5 –¥–Ω–µ–π</span> –¥–æ 31 –¥–µ–∫–∞–±—Ä—è 2025</h2>
            
            <div class="calendar-grid" id="adventCalendarGrid">
                <!-- –î–µ–Ω—å 1 -->
                <div class="day-card" data-day="1">
                    <div class="day-number">1 –î–µ–Ω—å</div>
                    <div class="day-icon">üè°</div>
                    <div class="day-title">–£–≥–æ–ª—å–Ω–∞—è –î–µ—Ä–µ–≤–Ω—è</div>
                    <div class="day-date">(27.12.2025)</div>
                    <div class="day-status" id="day1Status"></div>
                    <div class="day-timer" id="timer1"></div>
                </div>
                
                <!-- –î–µ–Ω—å 2 -->
                <div class="day-card" data-day="2">
                    <div class="day-number">2 –î–µ–Ω—å</div>
                    <div class="day-icon">üêâ</div>
                    <div class="day-title">–ü–µ—â–µ—Ä–∞ –¥—Ä–∞–∫–æ–Ω–∞. –¢–∏—Ö–∞—è –∫—Ä–∞–∂–∞</div>
                    <div class="day-date">(28.12.2025)</div>
                    <div class="day-status" id="day2Status"></div>
                    <div class="day-timer" id="timer2"></div>
                </div>
                
                <!-- –î–µ–Ω—å 3 -->
                <div class="day-card" data-day="3">
                    <div class="day-number">3 –î–µ–Ω—å</div>
                    <div class="day-icon">‚õèÔ∏è</div>
                    <div class="day-title">–ì–ª—É–±–æ–∫–∞—è —à–∞—Ö—Ç–∞. –í–µ—á–Ω–∞—è –º–µ—Ä–∑–ª–æ—Ç–∞</div>
                    <div class="day-date">(29.12.2025)</div>
                    <div class="day-status" id="day3Status"></div>
                    <div class="day-timer" id="timer3"></div>
                </div>
                
                <!-- –î–µ–Ω—å 4 -->
                <div class="day-card" data-day="4">
                    <div class="day-number">4 –î–µ–Ω—å</div>
                    <div class="day-icon">üîç</div>
                    <div class="day-title">–ü–æ–∏—Å–∫–∏ –∞–ª—Ç–∞—Ä—è</div>
                    <div class="day-date">(30.12.2025)</div>
                    <div class="day-status" id="day4Status"></div>
                    <div class="day-timer" id="timer4"></div>
                </div>
                
                <!-- –î–µ–Ω—å 5 -->
                <div class="day-card" data-day="5">
                    <div class="day-number">5 –î–µ–Ω—å</div>
                    <div class="day-icon">üåë</div>
                    <div class="day-title">–§–∏–Ω–∞–ª—å–Ω—ã–µ –ø–æ–∏—Å–∫–∏ –¢–µ–Ω–∏</div>
                    <div class="day-date">(31.12.2025)</div>
                    <div class="day-status" id="day5Status"></div>
                    <div class="day-timer" id="timer5"></div>
                </div>
            </div>
            
            <!-- –ú–ò–ù–ò-–ö–í–ï–°–¢ –†–ê–°–ü–û–õ–û–ñ–ï–ù –ü–û–î –î–ù–Ø–ú–ò -->
            <div class="mini-quest-section">
                <h3 class="section-title">‚ö° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–∏–Ω–∏-–∫–≤–µ—Å—Ç</h3>
                <p class="section-subtitle">–û—Å–æ–±–æ–µ –∑–∞–¥–∞–Ω–∏–µ –≤–Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è</p>
                
                <div class="mini-quest-card">
                    <div class="quest-header">
                        <div class="quest-icon">üè∞</div>
                        <div class="quest-title-content">
                            <div class="quest-main-title">–ü—Ä–æ–≥—É–ª–∫–∞ –≤ —Ç–∞–≤–µ—Ä–Ω—É</div>
                            <div class="quest-date">–î–æ—Å—Ç—É–ø–Ω–æ —Å 21.12.2023</div>
                        </div>
                    </div>
                    
                    <div class="quest-description">
                        <p>–ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ –¥–æ –º–µ—Å—Ç–Ω–æ–π —Ç–∞–≤–µ—Ä–Ω—ã "–°–Ω–µ–∂–Ω—ã–π —É–≥–æ–ª–æ–∫".<br>
                        –ü–æ—Å–º–æ—Ç—Ä–∏, –∫–∞–∫ —É–∫—Ä–∞—Å–∏–ª–∏ —Ç–∞–≤–µ—Ä–Ω—É –∫ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞–º,<br>
                        –∏ –Ω–∞—Å–ª–∞–¥–∏—Å—å —É—é—Ç–Ω–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ–π –∑–∏–º–Ω–µ–≥–æ –≤–µ—á–µ—Ä–∞.</p>
                    </div>
                    
                    <div class="quest-info-simple">
                        <div class="info-item-simple">
                            <span class="info-icon-simple">‚è±Ô∏è</span>
                            <span class="info-text-simple">~5 –º–∏–Ω—É—Ç</span>
                        </div>
                        <div class="info-item-simple">
                            <span class="info-icon-simple">üö∂</span>
                            <span class="info-text-simple">–ù–µ—Å–ø–µ—à–Ω–∞—è –ø—Ä–æ–≥—É–ª–∫–∞</span>
                        </div>
                    </div>
                    
                    <div class="quest-status-container">
                        <div class="quest-status">‚è≥ –û—Ç–∫—Ä–æ–µ—Ç—Å—è —á–µ—Ä–µ–∑ 1 –¥–µ–Ω—å</div>
                    </div>
                    
                    <!-- –£–õ–£–ß–®–ï–ù–ù–ê–Ø –ö–ù–û–ü–ö–ê -->
                    <div class="quest-button-container">
                        <a href="elianshchina.html" class="quest-button-new">
                            <span class="button-content">
                                <span class="button-icon-new">üö∂</span>
                                <span class="button-text-new">–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç "–¢–∞–≤–µ—Ä–Ω–∞"</span>
                            </span>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="final-date">
                <p>üèÅ –§–∏–Ω–∞–ª—å–Ω—ã–π –¥–µ–Ω—å: <strong>31 –¥–µ–∫–∞–±—Ä—è 2025 –≥–æ–¥–∞</strong></p>
                <p class="days-left">‚è≥ –û—Å—Ç–∞–ª–æ—Å—å <span id="daysLeft">5</span> –¥–Ω–µ–π</p>
            </div>
        </div>
    </div>
</section>

    <!-- –†–∞–∑–¥–µ–ª "–ó–∏–º–Ω–∏–µ –≤–µ—Å—Ç–∏" -->
    <section class="news-section" id="news">
        <div class="container">
            <h2 style="color: #4fc3f7; font-family: 'Pixelify Sans', sans-serif;">‚ùÑÔ∏è –ó–∏–º–Ω–∏–µ –≤–µ—Å—Ç–∏</h2>
            <p style="color: #bbdefb; font-size: 18px; line-height: 1.6;">
                –ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ –∑–∏–º–Ω–µ–≥–æ –º–∏—Ä–∞
            </p>
            
            <div style="display: grid; gap: 20px; margin-top: 30px;">
                <div style="background: rgba(30, 40, 80, 0.6); padding: 20px; border-radius: 10px; border-left: 4px solid #4fc3f7;">
                    <h3 style="color: #ffcc80; margin-top: 0;">üéÑ –í—Å–µ –¥–Ω–∏ —Å—Ç–∞–ª–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏!</h3>
                    <p style="color: #e3f2fd;">–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å–æ–¥–µ—Ä–∂–∏—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é –º–∏–Ω–∏-–∏–≥—Ä—É –∏–ª–∏ –¥–∏–∞–ª–æ–≥ —Å –≤—ã–±–æ—Ä–æ–º!</p>
                    <span style="color: #90a4ae; font-size: 14px;">–û–±–Ω–æ–≤–ª–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</span>
                </div>
                
                <div style="background: rgba(30, 40, 80, 0.6); padding: 20px; border-radius: 10px; border-left: 4px solid #ff9800;">
                    <h3 style="color: #ffcc80; margin-top: 0;"> –ù–æ–≤—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂</h3>
                    <p style="color: #e3f2fd;">–í –¥–µ–Ω—å 1 –ø–æ—è–≤–∏–ª—Å—è —Å–Ω–µ–∂–Ω–∞—è –º—ã—à–∫–∞ –Æ–º–∏ - –Ω–æ–≤—ã–π –¥—Ä—É–≥ –∏ –ø–æ–º–æ—â–Ω–∏–∫!</p>
                    <span style="color: #90a4ae; font-size: 14px;">27 –¥–µ–∫–∞–±—Ä—è 2025</span>
                </div>
            </div>
        </div>
    </section>
</div> <!-- –ó–∞–∫—Ä—ã—Ç–∏–µ .wrapper -->

<!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
<div class="inventory-notification" id="inventoryNotification">
    <div class="notification-content">
        <div class="notification-icon">üéÅ</div>
        <div class="notification-text">
            <strong>–ü–†–ï–î–ú–ï–¢–´ –î–û–ë–ê–í–õ–ï–ù–´ –í –ò–ù–í–ï–ù–¢–ê–†–¨!</strong>
            <span id="notificationItems"></span>
        </div>
        <a href="inventory.html" class="notification-link">–û–¢–ö–†–´–¢–¨ –ò–ù–í–ï–ù–¢–ê–†–¨ ‚Üí</a>
    </div>
    <button class="notification-close" onclick="hideInventoryNotification()">√ó</button>
</div>


<!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
<div class="journey-progress" id="journeyProgressBar">
    <div class="progress-track">
        <div class="progress-fill" id="progressFill"></div>
    </div>
    <div class="progress-text">–ü—É—Ç—å –∫ –ù–æ–≤–æ–º—É –ì–æ–¥—É: <span id="progressPercent">0%</span></div>
</div>

<script>
// ========== –ê–£–î–ò–û –ö–û–ù–¢–†–û–õ–õ–ï–† ==========
document.addEventListener('DOMContentLoaded', function() {
    const audio = document.getElementById('backgroundMusic');
    const volumeSlider = document.getElementById('volumeSlider');
    const volumeValue = document.getElementById('volumeValue');
    const playBtn = document.getElementById('playBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const muteBtn = document.getElementById('muteBtn');
    const audioController = document.getElementById('audioController');
    const audioToggle = document.getElementById('audioToggle');
    
    let isMuted = false;
    let lastVolume = 30; // –ù–∞—á–∞–ª—å–Ω–∞—è –≥—Ä–æ–º–∫–æ—Å—Ç—å
    
    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ localStorage
    const savedVolume = localStorage.getItem('musicVolume');
    const savedMuted = localStorage.getItem('musicMuted');
    const savedPlaying = localStorage.getItem('musicPlaying');
    
    if (savedVolume) {
        volumeSlider.value = savedVolume;
        audio.volume = savedVolume / 100;
        volumeValue.textContent = savedVolume + '%';
    }
    
    if (savedMuted === 'true') {
        isMuted = true;
        audio.muted = true;
        muteBtn.textContent = 'üîä –í–∫–ª';
        muteBtn.classList.add('active');
    }
    
    // –ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
    setTimeout(() => {
        if (savedPlaying !== 'false') {
            audio.play().catch(e => {
                console.log('–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:', e);
            });
            playBtn.classList.add('active');
        }
    }, 1000);
    
    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç—å—é
    volumeSlider.addEventListener('input', function() {
        const value = this.value;
        audio.volume = value / 100;
        volumeValue.textContent = value + '%';
        localStorage.setItem('musicVolume', value);
        
        if (isMuted && value > 0) {
            isMuted = false;
            audio.muted = false;
            muteBtn.textContent = 'üîá –¢–∏—Ö–æ';
            muteBtn.classList.remove('active');
            localStorage.setItem('musicMuted', 'false');
        }
    });
    
    // –ö–Ω–æ–ø–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
    playBtn.addEventListener('click', function() {
        audio.play();
        playBtn.classList.add('active');
        pauseBtn.classList.remove('active');
        localStorage.setItem('musicPlaying', 'true');
    });
    
    // –ö–Ω–æ–ø–∫–∞ –ø–∞—É–∑—ã
    pauseBtn.addEventListener('click', function() {
        audio.pause();
        pauseBtn.classList.add('active');
        playBtn.classList.remove('active');
        localStorage.setItem('musicPlaying', 'false');
    });
    
    // –ö–Ω–æ–ø–∫–∞ mute/unmute
    muteBtn.addEventListener('click', function() {
        if (isMuted) {
            // –í–∫–ª—é—á–∞–µ–º –∑–≤—É–∫
            audio.muted = false;
            isMuted = false;
            muteBtn.textContent = 'üîá –¢–∏—Ö–æ';
            muteBtn.classList.remove('active');
            localStorage.setItem('musicMuted', 'false');
        } else {
            // –í—ã–∫–ª—é—á–∞–µ–º –∑–≤—É–∫
            lastVolume = volumeSlider.value;
            audio.muted = true;
            isMuted = true;
            muteBtn.textContent = 'üîä –í–∫–ª';
            muteBtn.classList.add('active');
            localStorage.setItem('musicMuted', 'true');
        }
    });
    
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
    audioToggle.addEventListener('click', function() {
        if (audioController.style.display === 'none') {
            audioController.style.display = 'block';
            audioToggle.textContent = '‚úï';
            audioToggle.style.background = 'rgba(79, 195, 247, 0.3)';
        } else {
            audioController.style.display = 'none';
            audioToggle.textContent = '‚ô™';
            audioToggle.style.background = 'rgba(15, 25, 45, 0.9)';
        }
    });
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
    let hideTimeout;
    function resetHideTimeout() {
        clearTimeout(hideTimeout);
        if (audioController.style.display !== 'none') {
            hideTimeout = setTimeout(() => {
                audioController.style.display = 'none';
                audioToggle.textContent = '‚ô™';
                audioToggle.style.background = 'rgba(15, 25, 45, 0.9)';
            }, 5000);
        }
    }
    
    // –°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞ –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º
    audioController.addEventListener('mouseenter', () => {
        clearTimeout(hideTimeout);
    });
    
    audioController.addEventListener('mouseleave', resetHideTimeout);
    audioToggle.addEventListener('mouseenter', () => {
        if (audioController.style.display === 'none') {
            clearTimeout(hideTimeout);
        }
    });
    
    // –°—Ç–∞—Ä—Ç —Ç–∞–π–º–µ—Ä–∞
    resetHideTimeout();
    
    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≥—Ä—É–∑–∫–µ –º—É–∑—ã–∫–∏
    audio.addEventListener('loadeddata', function() {
        console.log('üéµ –§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        showMessage('–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞ –≥–æ—Ç–æ–≤–∞ –∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é', 3000);
    });
    
    audio.addEventListener('error', function(e) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º—É–∑—ã–∫–∏:', e);
        showMessage('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –º—É–∑—ã–∫—É', 5000);
    });
});

// ========== –ê–î–í–ï–ù–¢-–ö–ê–õ–ï–ù–î–ê–†–¨ –° –¢–ê–ô–ú–ï–†–û–ú ==========
const ADVENT_DAYS = 5;
const DAY_DATES = {
    1: new Date('December 27, 2025 00:00:00'), // 27.12.2025
    2: new Date('December 28, 2025 00:00:00'), // 28.12.2025
    3: new Date('December 29, 2025 00:00:00'), // 29.12.2025
    4: new Date('December 30, 2025 00:00:00'), // 30.12.2025
    5: new Date('December 31, 2025 00:00:00')  // 31.12.2025
};

// –ú–∏–Ω–∏-–∫–≤–µ—Å—Ç –¥–∞—Ç–∞
const MINI_QUEST_DATE = new Date('December 21, 2023 00:00:00');

// –°—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
const dayPages = {
    1: "day1.html",
    2: "day2.html", 
    3: "day3.html",
    4: "day4.html",
    5: "day5.html"
};

// –ù–∞–∑–≤–∞–Ω–∏—è –¥–Ω–µ–π
const dayTitles = {
    1: "–£–≥–æ–ª—å–Ω–∞—è –î–µ—Ä–µ–≤–Ω—è",
    2: "–ü–µ—â–µ—Ä–∞ –¥—Ä–∞–∫–æ–Ω–∞. –¢–∏—Ö–∞—è –∫—Ä–∞–∂–∞",
    3: "–ì–ª—É–±–æ–∫–∞—è —à–∞—Ö—Ç–∞. –í–µ—á–Ω–∞—è –º–µ—Ä–∑–ª–æ—Ç–∞",
    4: "–ü–æ–∏—Å–∫–∏ –∞–ª—Ç–∞—Ä—è",
    5: "–§–∏–Ω–∞–ª—å–Ω—ã–µ –ø–æ–∏—Å–∫–∏ –¢–µ–Ω–∏"
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
function formatTimeDiff(diff) {
    if (diff <= 0) return "–î–æ—Å—Ç—É–ø–Ω–æ —Å–µ–π—á–∞—Å!";
    
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
    
    if (days > 0) {
        return `–û—Ç–∫—Ä–æ–µ—Ç—Å—è —á–µ—Ä–µ–∑ ${days}–¥ ${hours}—á`;
    } else if (hours > 0) {
        return `–û—Ç–∫—Ä–æ–µ—Ç—Å—è —á–µ—Ä–µ–∑ ${hours}—á ${minutes}–º`;
    } else if (minutes > 0) {
        return `–û—Ç–∫—Ä–æ–µ—Ç—Å—è —á–µ—Ä–µ–∑ ${minutes}–º ${seconds}—Å`;
    } else {
        return `–û—Ç–∫—Ä–æ–µ—Ç—Å—è —á–µ—Ä–µ–∑ ${seconds}—Å`;
    }
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–Ω—è
function isDayAvailable(dayNum) {
    const now = new Date();
    const dayDate = DAY_DATES[dayNum];
    return now >= dayDate;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–∏–Ω–∏-–∫–≤–µ—Å—Ç–∞
function isMiniQuestAvailable() {
    const now = new Date();
    return now >= MINI_QUEST_DATE;
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ –¥–ª—è –¥–Ω—è
function updateDayTimer(dayNum) {
    const timerElement = document.getElementById(`timer${dayNum}`);
    if (!timerElement) return;
    
    const now = new Date();
    const dayDate = DAY_DATES[dayNum];
    const diff = dayDate - now;
    
    timerElement.textContent = formatTimeDiff(diff);
    
    // –ï—Å–ª–∏ –¥–µ–Ω—å –¥–æ—Å—Ç—É–ø–µ–Ω, –¥–µ–ª–∞–µ–º –µ–≥–æ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º
    if (diff <= 0) {
        const dayCard = document.querySelector(`.day-card[data-day="${dayNum}"]`);
        if (dayCard && !dayCard.classList.contains('available')) {
            dayCard.classList.add('available');
            dayCard.classList.remove('locked');
            dayCard.style.cursor = 'pointer';
            dayCard.onclick = function() {
                openDayPage(dayNum);
            };
            
            // –ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            if (dayNum === 1 && localStorage.getItem('day1Unlocked') !== 'true') {
                showMessage('üéâ –î–µ–Ω—å 1 —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω! –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.', 5000);
                localStorage.setItem('day1Unlocked', 'true');
            }
        }
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–π–º–µ—Ä–æ–≤
function updateAllTimers() {
    for (let day = 1; day <= ADVENT_DAYS; day++) {
        updateDayTimer(day);
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –¥–Ω–µ–π –¥–æ –ù–æ–≤–æ–≥–æ –≥–æ–¥–∞
    updateDaysCounter();
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –º–∏–Ω–∏-–∫–≤–µ—Å—Ç–∞
    updateMiniQuestStatus();
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –º–∏–Ω–∏-–∫–≤–µ—Å—Ç–∞
function updateMiniQuestStatus() {
    const now = new Date();
    const miniQuestCard = document.querySelector('.mini-quest-card');
    const questStatus = miniQuestCard.querySelector('.quest-status');
    const questButton = miniQuestCard.querySelector('.quest-button-new');
    
    if (!miniQuestCard || !questStatus) return;
    
    if (isMiniQuestAvailable()) {
        // –ú–∏–Ω–∏-–∫–≤–µ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
        miniQuestCard.style.cursor = 'pointer';
        miniQuestCard.onclick = function() {
            window.location.href = 'elianshchina.html';
        };
        
        questStatus.textContent = 'üéÆ –î–æ—Å—Ç—É–ø–Ω–æ —Å–µ–π—á–∞—Å';
        questStatus.style.background = 'linear-gradient(145deg, #32CD32, #228B22)';
        questStatus.style.borderColor = '#90EE90';
        questStatus.style.boxShadow = '0 0 15px rgba(50, 205, 50, 0.4)';
        questStatus.style.animation = 'pixelPulse 1.5s infinite';
        
        if (questButton) {
            questButton.style.opacity = '1';
            questButton.style.cursor = 'pointer';
            questButton.onclick = function(e) {
                e.stopPropagation();
                window.location.href = 'elianshchina.html';
            };
            
            // –ï—Å–ª–∏ –º–∏–Ω–∏-–∫–≤–µ—Å—Ç —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å—Ç–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            if (localStorage.getItem('miniQuestUnlocked') !== 'true') {
                showMessage('üéØ –ú–∏–Ω–∏-–∫–≤–µ—Å—Ç "–ü—Ä–æ–≥—É–ª–∫–∞ –≤ —Ç–∞–≤–µ—Ä–Ω—É" —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω!', 5000);
                localStorage.setItem('miniQuestUnlocked', 'true');
            }
        }
    } else {
        // –ú–∏–Ω–∏-–∫–≤–µ—Å—Ç –µ—â–µ –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω
        const diff = MINI_QUEST_DATE - now;
        const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
        
        if (days > 0) {
            questStatus.textContent = `‚è≥ –û—Ç–∫—Ä–æ–µ—Ç—Å—è —á–µ—Ä–µ–∑ ${days} ${days === 1 ? '–¥–µ–Ω—å' : '–¥–Ω—è'}`;
        } else {
            const hours = Math.ceil(diff / (1000 * 60 * 60));
            questStatus.textContent = `‚è≥ –û—Ç–∫—Ä–æ–µ—Ç—Å—è —á–µ—Ä–µ–∑ ${hours} ${hours === 1 ? '—á–∞—Å' : '—á–∞—Å–æ–≤'}`;
        }
        
        questStatus.style.background = 'linear-gradient(145deg, #FF8C00, #FF4500)';
        questStatus.style.borderColor = '#FFA500';
        questStatus.style.boxShadow = '0 0 15px rgba(255, 140, 0, 0.4)';
        questStatus.style.animation = 'none';
        
        miniQuestCard.style.cursor = 'not-allowed';
        miniQuestCard.onclick = function(e) {
            e.preventDefault();
            showMessage(`–ú–∏–Ω–∏-–∫–≤–µ—Å—Ç –æ—Ç–∫—Ä–æ–µ—Ç—Å—è ${MINI_QUEST_DATE.toLocaleDateString('ru-RU')}`, 3000);
        };
        
        if (questButton) {
            questButton.style.opacity = '0.7';
            questButton.style.cursor = 'not-allowed';
            questButton.style.background = 'linear-gradient(145deg, #666, #444)';
            questButton.style.borderColor = '#888';
            questButton.onclick = function(e) {
                e.preventDefault();
                e.stopPropagation();
                showMessage(`–ú–∏–Ω–∏-–∫–≤–µ—Å—Ç –æ—Ç–∫—Ä–æ–µ—Ç—Å—è ${MINI_QUEST_DATE.toLocaleDateString('ru-RU')}`, 3000);
            };
        }
    }
}

// –û—Ç–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–Ω—è
function openDayPage(day) {
    if (!isDayAvailable(day)) {
        showMessage(`–≠—Ç–æ—Ç –¥–µ–Ω—å –æ—Ç–∫—Ä–æ–µ—Ç—Å—è ${DAY_DATES[day].toLocaleDateString('ru-RU')}`);
        return;
    }
    
    const pageUrl = dayPages[day];
    if (pageUrl) {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –¥–Ω–µ
        sessionStorage.setItem('currentAdventDay', day);
        sessionStorage.setItem('dayTitle', dayTitles[day]);
        
        // –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥
        document.body.style.opacity = '0.8';
        setTimeout(() => {
            window.location.href = pageUrl;
        }, 300);
    } else {
        showMessage('–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–≥—Ä–æ–π –ø–æ–∫–∞ –Ω–µ –≥–æ—Ç–æ–≤–∞!');
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –¥–Ω–µ–π –¥–æ –ù–æ–≤–æ–≥–æ –≥–æ–¥–∞
function updateDaysCounter() {
    const now = new Date();
    const newYearDate = new Date('December 31, 2025 23:59:59');
    const diff = newYearDate - now;
    
    if (diff <= 0) {
        document.getElementById('daysCounter').textContent = '0 –¥–Ω–µ–π';
        document.getElementById('daysLeft').textContent = '0';
        return;
    }
    
    const daysLeft = Math.ceil(diff / (1000 * 60 * 60 * 24));
    document.getElementById('daysCounter').textContent = `${daysLeft} –¥–Ω–µ–π`;
    document.getElementById('daysLeft').textContent = daysLeft;
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
function initCalendar() {
    console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–≤–µ–Ω—Ç-–∫–∞–ª–µ–Ω–¥–∞—Ä—è —Å —Ç–∞–π–º–µ—Ä–∞–º–∏');
    
    const now = new Date();
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–Ω–µ–π
    document.querySelectorAll('.day-card').forEach((card, index) => {
        const dayNumber = index + 1;
        const dayDate = DAY_DATES[dayNumber];
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
        card.style.animationDelay = `${index * 0.1}s`;
        
        if (isDayAvailable(dayNumber)) {
            // –î–µ–Ω—å –¥–æ—Å—Ç—É–ø–µ–Ω
            card.classList.add('available');
            card.classList.remove('locked');
            card.style.cursor = 'pointer';
            card.onclick = function() {
                openDayPage(dayNumber);
            };
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–æ–π–¥–µ–Ω –ª–∏ –¥–µ–Ω—å
            if (localStorage.getItem(`day${dayNumber}_completed`) === 'true') {
                card.classList.add('completed');
                const statusEl = card.querySelector('.day-status');
                if (statusEl) {
                    statusEl.innerHTML = '‚úÖ';
                    statusEl.style.animation = 'pixelPulse 1s infinite alternate';
                }
            }
        } else {
            // –î–µ–Ω—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
            card.classList.remove('available');
            card.classList.add('locked');
            card.onclick = null;
            card.style.cursor = 'not-allowed';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞—Ç—É —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
            const dayDateElement = card.querySelector('.day-date');
            if (dayDateElement) {
                dayDateElement.style.color = '#FF8C00';
                dayDateElement.style.textShadow = '0 0 5px rgba(255, 140, 0, 0.7)';
            }
        }
    });
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∏–Ω–∏-–∫–≤–µ—Å—Ç–∞
    updateMiniQuestStatus();
    
    // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–æ–≤
    updateAllTimers();
    setInterval(updateAllTimers, 1000);
    
    updateProgressBar();
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
function updateProgressBar() {
    const progressFill = document.getElementById('progressFill');
    const progressPercent = document.getElementById('progressPercent');
    
    if (!progressFill || !progressPercent) return;
    
    let completedDays = 0;
    for (let i = 1; i <= ADVENT_DAYS; i++) {
        if (localStorage.getItem(`day${i}_completed`) === 'true') {
            completedDays++;
        }
    }
    
    const percent = (completedDays / ADVENT_DAYS) * 100;
    
    progressFill.style.width = percent + '%';
    progressPercent.textContent = Math.round(percent) + '%';
}

// –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
function showMessage(text, duration = 3000) {
    const oldMsg = document.querySelector('.flash-message');
    if (oldMsg) oldMsg.remove();
    
    const msg = document.createElement('div');
    msg.className = 'flash-message';
    msg.textContent = text;
    msg.style.cssText = `
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0,0,0,0.9);
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        border: 2px solid #4CAF50;
        z-index: 10000;
        font-family: "Pixelify Sans", sans-serif;
        animation: fadeIn 0.3s;
    `;
    
    document.body.appendChild(msg);
    setTimeout(() => {
        msg.style.opacity = '0';
        msg.style.transition = 'opacity 0.5s';
        setTimeout(() => msg.remove(), 500);
    }, duration);
}

// ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï ==========
document.addEventListener('DOMContentLoaded', function() {
    console.log('–ê–¥–≤–µ–Ω—Ç-–∫–∞–ª–µ–Ω–¥–∞—Ä—å –∑–∞–≥—Ä—É–∂–µ–Ω');
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å
    initCalendar();
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
    updateInventoryCounter();
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π...
});

// ========== TYPEWRITER EFFECT ==========
function typeWriter(element, text, speed = 30, callback = null) {
    // –û—á–∏—â–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç
    element.innerHTML = '';
    
    // –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (–Ω–∞ —Å–ª—É—á–∞–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞)
    element.dataset.fullText = text;
    
    let i = 0;
    const typeInterval = setInterval(() => {
        if (i < text.length) {
            // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ –æ–¥–Ω–æ–º—É —Å–∏–º–≤–æ–ª—É
            element.innerHTML += text.charAt(i);
            i++;
            
            // –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
            const scrollContainer = element.closest('.dialog-text, [style*="max-height"]');
            if (scrollContainer) {
                scrollContainer.scrollTop = scrollContainer.scrollHeight;
            }
        } else {
            clearInterval(typeInterval);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –º–∏–≥–∞—é—â–∏–π –∫—É—Ä—Å–æ—Ä –≤ –∫–æ–Ω—Ü–µ
            element.innerHTML += '<span class="blinking-cursor">|</span>';
            
            // –í—ã–∑—ã–≤–∞–µ–º –∫–æ–ª–±—ç–∫ –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
            if (callback && typeof callback === 'function') {
                setTimeout(callback, 100);
            }
        }
    }, speed);
    
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∞–Ω–∏–º–∞—Ü–∏–∏
    return () => {
        clearInterval(typeInterval);
        // –ó–∞–≤–µ—Ä—à–∞–µ–º —Ç–µ–∫—Å—Ç —Å—Ä–∞–∑—É
        element.innerHTML = text;
        if (callback && typeof callback === 'function') {
            callback();
        }
    };
}

// ========== –ò–ù–í–ï–ù–¢–ê–†–¨ ==========
function addToInventory(item) {
    console.log('üéÅ –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å:', item);
    
    let inventory = JSON.parse(localStorage.getItem('winterAdventureInventory')) || [];
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —ç—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
    if (!inventory.includes(item)) {
        inventory.push(item);
        localStorage.setItem('winterAdventureInventory', JSON.stringify(inventory));
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        showInventoryNotification(item);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –≤ –º–µ–Ω—é
        updateInventoryCounter();
        
        console.log('‚úÖ –ü—Ä–µ–¥–º–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å:', item);
        return true;
    } else {
        console.log('‚ÑπÔ∏è –ü—Ä–µ–¥–º–µ—Ç —É–∂–µ –µ—Å—Ç—å –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ:', item);
        return false;
    }
}

function showInventoryNotification(item) {
    const notification = document.getElementById('inventoryNotification');
    const itemNameElement = document.getElementById('notificationItemName');
    
    if (notification && itemNameElement) {
        itemNameElement.textContent = item;
        notification.style.display = 'block';
        
        setTimeout(() => {
            if (notification.style.display === 'block') {
                notification.style.display = 'none';
            }
        }, 5000);
        
        const closeBtn = notification.querySelector('.notification-close');
        if (closeBtn) {
            closeBtn.onclick = function() {
                notification.style.display = 'none';
            };
        }
    }
}

function updateInventoryCounter() {
    const counter = document.getElementById('inventoryCount');
    if (counter) {
        const inventory = JSON.parse(localStorage.getItem('winterAdventureInventory')) || [];
        counter.textContent = inventory.length;
        
        if (inventory.length > 0) {
            counter.style.display = 'flex';
        } else {
            counter.style.display = 'none';
        }
    }
}

// ========== –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ï –≠–õ–ï–ú–ï–ù–¢–´ –ü–ï–†–°–û–ù–ê–ñ–ê ==========
document.addEventListener('DOMContentLoaded', function() {
    const nickDialogs = {
        talk: [
            "–ü—Ä–∏–≤–µ—Ç... –•–æ–ª–æ–¥–Ω–æ, –ø—Ä–∞–≤–¥–∞? –ù–æ —ç—Ç–æ –Ω–µ —Å–∞–º—ã–π —Å—Ç—Ä–∞—à–Ω—ã–π —Ö–æ–ª–æ–¥.",
            "–ó–Ω–∞–µ—à—å, –∏–Ω–æ–≥–¥–∞ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —è –≤—Å—ë –µ—â—ë –≤ —à–∞—Ö—Ç–µ.",
            "–Ø —É—à—ë–ª –Ω–µ –ø–æ—Ç–æ–º—É, —á—Ç–æ –º–Ω–µ –±—ã–ª–æ –ø–ª–æ—Ö–æ.",
            "–ú–æ–π –æ—Ç–µ—Ü –±—ã–ª —à–∞—Ö—Ç—ë—Ä–æ–º. –û–Ω –≥–æ–≤–æ—Ä–∏–ª: '–¢–µ–º–Ω–æ—Ç–∞ ‚Äî —ç—Ç–æ –Ω–µ –≤—Ä–∞–≥...'",
            "–ò–Ω–æ–≥–¥–∞ —è —á—É–≤—Å—Ç–≤—É—é, –∫–∞–∫ —á—Ç–æ-—Ç–æ –∏–¥—ë—Ç –∑–∞ –º–Ω–æ–π."
        ],
        village: [
            "–ù–∞—à–∞ –¥–µ—Ä–µ–≤–Ω—è ‚Äî '–£–≥–æ–ª—å–Ω–æ–µ –°–µ—Ä–¥—Ü–µ'.",
            "–î–µ—Ä–µ–≤–Ω—è —Å—Ç–æ–∏—Ç —É –ø–æ–¥–Ω–æ–∂—å—è –≥–æ—Ä.",
            "–ú—ã –Ω–∞—Ö–æ–¥–∏–ª–∏ –≤ —à–∞—Ö—Ç–∞—Ö —Å—Ç—Ä–∞–Ω–Ω—ã–µ –≤–µ—â–∏.",
            "–ö–∞–∂–¥—ã–π –ù–æ–≤—ã–π –≥–æ–¥ –º—ã —É–∫—Ä–∞—à–∞–µ–º –≤—Ö–æ–¥ –≤ –≥–ª–∞–≤–Ω—É—é —à–∞—Ö—Ç—É.",
            "–¢–∞–º, –≤ –≥–ª—É–±–∏–Ω–µ, —Ç–∏—à–∏–Ω–∞ –æ—Å–æ–±–∞—è."
        ],
        blade: [
            "–≠—Ç–æ—Ç –∫–ª–∏–Ω–æ–∫ —è –Ω–∞—à—ë–ª –≤ —Å–∞–º–æ–π –≥–ª—É–±–æ–∫–æ–π —à–∞—Ö—Ç–µ.",
            "–û–Ω —Å–¥–µ–ª–∞–Ω –Ω–µ –∏–∑ –º–µ—Ç–∞–ª–ª–∞.",
            "–ö–ª–∏–Ω–æ–∫ –Ω–µ —Ä–µ–∂–µ—Ç –ø–ª–æ—Ç—å.",
            "–ò–Ω–æ–≥–¥–∞ –æ–Ω —Å–≤–µ—Ç–∏—Ç—Å—è —Å–∞–º –ø–æ —Å–µ–±–µ.",
            "–û—Ç–µ—Ü –Ω–µ –æ–¥–æ–±—Ä–∏–ª –±—ã."
        ]
    };

    const choiceButtons = document.querySelectorAll('.choice-btn');
    const typewriterText = document.getElementById('typewriterText');
    const typingCursor = document.querySelector('.typing-cursor');
    
    let currentTypewriter = null;

    function getRandomDialog(type) {
        const dialogs = nickDialogs[type];
        return dialogs[Math.floor(Math.random() * dialogs.length)];
    }

    function typeText(element, text, speed = 40, callback = null) {
        if (currentTypewriter) {
            currentTypewriter.stop();
        }
        
        element.textContent = '';
        
        if (typingCursor) {
            typingCursor.style.opacity = '0';
        }
        
        let i = 0;
        let intervalId = null;
        
        const stopTyping = function() {
            if (intervalId) {
                clearInterval(intervalId);
                intervalId = null;
            }
            element.textContent = text;
            if (typingCursor) {
                typingCursor.style.opacity = '1';
                typingCursor.style.animation = 'blink 1s infinite';
            }
            if (callback) callback();
        };
        
        const skipAnimation = function() {
            if (intervalId) {
                stopTyping();
            }
        };
        
        intervalId = setInterval(() => {
            if (i < text.length) {
                element.textContent += text.charAt(i);
                i++;
            } else {
                stopTyping();
            }
        }, speed);
        
        return {
            stop: stopTyping,
            skip: skipAnimation
        };
    }

    if (choiceButtons.length > 0 && typewriterText) {
        typewriterText.addEventListener('click', function() {
            if (currentTypewriter) {
                currentTypewriter.skip();
                currentTypewriter = null;
            }
        });
        
        choiceButtons.forEach(button => {
            button.addEventListener('click', function() {
                const choice = this.dataset.choice;
                
                this.style.transform = 'scale(0.95)';
                this.style.opacity = '0.8';
                setTimeout(() => {
                    this.style.transform = '';
                    this.style.opacity = '1';
                }, 200);
                
                const dialog = getRandomDialog(choice);
                
                currentTypewriter = typeText(typewriterText, dialog, 40, () => {
                    if (typingCursor) {
                        typingCursor.style.opacity = '1';
                        typingCursor.style.animation = 'blink 1s infinite';
                    }
                    currentTypewriter = null;
                });
            });
        });
    }
    
    setTimeout(() => {
        if (typewriterText && !typewriterText.textContent) {
            const firstDialog = "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π. –Ø –ù–∏–∫. –†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å –≤ —ç—Ç–æ–º –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–∏. –ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª —É–∑–Ω–∞—Ç—å?";
            typewriterText.textContent = firstDialog;
            if (typingCursor) {
                typingCursor.style.opacity = '1';
                typingCursor.style.animation = 'blink 1s infinite';
            }
        }
    }, 1000);
});

// ========== –ü–†–û–ß–ò–ï –§–£–ù–ö–¶–ò–ò ==========
// –ü–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ"
document.querySelector('.hero--info .bth')?.addEventListener('click', function(e) {
    e.preventDefault();
    const adventSection = document.getElementById('advent-section');
    if (adventSection) {
        window.scrollTo({
            top: adventSection.offsetTop - 80,
            behavior: 'smooth'
        });
        
        this.style.transform = 'scale(0.95)';
        setTimeout(() => {
            this.style.transform = 'scale(1)';
        }, 200);
    }
});

// –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –º–µ–Ω—é
const backToMenuBtn = document.createElement('a');
backToMenuBtn.id = 'backToMenuBtn';
backToMenuBtn.href = '#';
backToMenuBtn.innerHTML = '‚ò∞';
backToMenuBtn.title = '–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –º–µ–Ω—é';
document.body.appendChild(backToMenuBtn);

backToMenuBtn.addEventListener('click', function(e) {
    e.preventDefault();
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
    
    setTimeout(() => {
        this.style.display = 'none';
    }, 500);
});

// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
window.addEventListener('scroll', function() {
    if (window.scrollY < 100) {
        backToMenuBtn.style.display = 'none';
    } else {
        backToMenuBtn.style.display = 'flex';
    }
});

// –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Ä–∞–∑–¥–µ–ª–∞–º
document.querySelectorAll('nav a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        
        const targetId = this.getAttribute('href');
        if (targetId === '#') return;
        
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
            window.scrollTo({
                top: targetElement.offsetTop - 100,
                behavior: 'smooth'
            });
            
            document.querySelectorAll('nav li').forEach(li => {
                li.classList.remove('active');
            });
            this.parentElement.classList.add('active');
        }
    });
});

console.log('üéÆ –ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞!');
</script>

</body>
</html>