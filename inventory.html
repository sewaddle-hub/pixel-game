<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏ –ö–∞—Ä—Ç–∞ - –ó–∏–º–Ω–µ–µ –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #0d1930, #1a1a2e);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 0.8s ease-out;
            position: relative;
        }
        
        h1 {
            color: #4fc3f7;
            font-size: 48px;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
            font-family: 'Pixelify Sans', sans-serif;
        }
        
        .subtitle {
            color: #bbdefb;
            font-size: 18px;
            margin-bottom: 30px;
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ */
        .back-home-btn {
            position: absolute;
            top: 10px;
            left: 0;
            background: linear-gradient(145deg, #2196F3, #1976D2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            font-family: 'Pixelify Sans', sans-serif;
            font-size: 16px;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
        }
        
        .back-home-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);
            background: linear-gradient(145deg, #42A5F5, #1E88E5);
        }
        
        .back-home-btn:active {
            transform: translateY(-1px);
        }
        
        /* –°–µ–∫—Ü–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è */
        .inventory-section {
            background: rgba(25, 35, 70, 0.8);
            border-radius: 20px;
            padding: 30px;
            border: 3px solid #2196F3;
            box-shadow: 0 10px 30px rgba(33, 150, 243, 0.1);
        }
        
        .section-title {
            color: #ffcc80;
            font-size: 32px;
            margin-bottom: 25px;
            font-family: 'Pixelify Sans', sans-serif;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, #2196F3, #ffcc80);
            border-radius: 3px;
        }
        
        .stats-container {
            background: rgba(33, 150, 243, 0.15);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 2px solid #2196F3;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .stat-item:hover {
            transform: translateY(-5px);
            background: rgba(33, 150, 243, 0.2);
        }
        
        .stat-value {
            font-size: 36px;
            color: #ffcc80;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #bbdefb;
            font-size: 16px;
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .item-card {
            background: rgba(30, 40, 80, 0.7);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 3px solid #2196F3;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.6s ease-out;
            min-height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .item-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(33, 150, 243, 0.3);
            border-color: #ffcc80;
        }
        
        .item-card.new {
            border-color: #ffcc80;
            animation: pulse 2s infinite;
        }
        
        .item-icon {
            font-size: 50px;
            margin-bottom: 15px;
            animation: float 3s ease-in-out infinite;
        }
        
        .item-name {
            font-size: 16px;
            color: #e3f2fd;
            margin-bottom: 10px;
            font-family: 'Pixelify Sans', sans-serif;
        }
        
        .item-description {
            font-size: 13px;
            color: #90a4ae;
            line-height: 1.4;
            margin-bottom: 10px;
        }
        
        .item-day {
            font-size: 11px;
            color: #5c6bc0;
            margin-top: auto;
        }
        
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            background: rgba(30, 40, 80, 0.3);
            border-radius: 15px;
            border: 2px dashed #5c6bc0;
        }
        
        .empty-state h3 {
            color: #bbdefb;
            font-size: 24px;
            margin-bottom: 15px;
        }
        
        .empty-state p {
            color: #90a4ae;
            font-size: 16px;
        }
        
        /* –°–µ–∫—Ü–∏—è –∫–∞—Ä—Ç—ã - –ï–©–ï –ë–û–õ–¨–®–ï */
        .map-section {
            background: rgba(25, 35, 70, 0.8);
            border-radius: 20px;
            padding: 30px;
            border: 3px solid #ff9800;
            box-shadow: 0 10px 30px rgba(255, 152, 0, 0.1);
            margin-top: 20px;
        }
        
        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã - –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û –ë–û–õ–¨–®–û–ô */
        .map-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255, 152, 0, 0.5);
            position: relative;
            overflow: hidden;
            min-height: 600px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .map-image {
            width: 95%;
            height: auto;
            max-height: 550px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
            transition: transform 0.3s ease;
            border: 4px solid rgba(255, 255, 255, 0.15);
            object-fit: contain;
        }
        
        .map-image:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.9);
        }
        
        /* –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥ –∫–∞—Ä—Ç–æ–π */
        .map-description {
            background: rgba(30, 40, 80, 0.5);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border-top: 3px solid rgba(255, 152, 0, 0.3);
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .description-title {
            color: #ffcc80;
            font-size: 24px;
            margin-bottom: 15px;
            font-family: 'Pixelify Sans', sans-serif;
            display: flex;
            align-items: center;
            gap: 10px;
            text-align: center;
            justify-content: center;
        }
        
        .description-text {
            color: #e3f2fd;
            line-height: 1.6;
            font-size: 17px;
            text-align: center;
            margin-bottom: 0;
        }
        
        .description-highlight {
            color: #ffcc80;
            font-weight: bold;
            font-style: italic;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 1200px) {
            .container {
                max-width: 1200px;
            }
            
            .map-container {
                max-width: 1100px;
                min-height: 550px;
            }
            
            .map-image {
                max-height: 500px;
            }
        }
        
        @media (max-width: 992px) {
            .container {
                max-width: 900px;
            }
            
            .map-container {
                max-width: 850px;
                min-height: 500px;
            }
            
            .map-image {
                max-height: 450px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                max-width: 100%;
            }
            
            h1 {
                font-size: 36px;
            }
            
            .section-title {
                font-size: 28px;
            }
            
            .inventory-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .item-card {
                padding: 20px;
                min-height: 160px;
            }
            
            .item-icon {
                font-size: 40px;
            }
            
            .map-container {
                min-height: 400px;
                padding: 15px;
                max-width: 100%;
            }
            
            .map-image {
                width: 98%;
                max-height: 380px;
                border-width: 3px;
            }
            
            .map-description {
                padding: 20px;
                margin-top: 25px;
            }
            
            .description-title {
                font-size: 22px;
            }
            
            .description-text {
                font-size: 16px;
            }
            
            .back-home-btn {
                position: relative;
                top: 0;
                left: 0;
                margin-bottom: 20px;
                display: inline-block;
            }
        }
        
        @media (max-width: 576px) {
            .inventory-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .stat-value {
                font-size: 28px;
            }
            
            .map-container {
                min-height: 350px;
                padding: 10px;
            }
            
            .map-image {
                max-height: 330px;
                border-width: 2px;
            }
            
            .map-description {
                padding: 15px;
                margin-top: 20px;
            }
            
            .description-title {
                font-size: 20px;
            }
            
            .description-text {
                font-size: 15px;
            }
        }
        
        @media (max-width: 400px) {
            .map-container {
                min-height: 300px;
            }
            
            .map-image {
                max-height: 280px;
            }
            
            .map-description {
                padding: 12px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <a href="index1.html" class="back-home-btn">
                ‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é
            </a>
            <h1>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏ –ö–∞—Ä—Ç–∞</h1>
            <p class="subtitle">–°–æ–±–µ—Ä–∏ –≤—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ –∏–∑—É—á–∏ –∫–∞—Ä—Ç—É –∑–∏–º–Ω–µ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</p>
        </header>
        
        <!-- –°–µ–∫—Ü–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è -->
        <section class="inventory-section">
            <h2 class="section-title">üì¶ –°–æ–±—Ä–∞–Ω–Ω—ã–µ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã</h2>
            
            <div class="stats-container">
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="totalItems">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="completedDays">0</div>
                        <div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ –¥–Ω–µ–π</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="progressPercent">0%</div>
                        <div class="stat-label">–ü—Ä–æ–≥—Ä–µ—Å—Å –∏–≥—Ä—ã</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="rareItems">0</div>
                        <div class="stat-label">–†–µ–¥–∫–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤</div>
                    </div>
                </div>
            </div>
            
            <div class="inventory-grid" id="inventoryGrid">
                <!-- –ü—Ä–µ–¥–º–µ—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
            </div>
        </section>
        
        <!-- –°–µ–∫—Ü–∏—è –∫–∞—Ä—Ç—ã - –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û –ö–†–£–ü–ù–ê–Ø -->
        <section class="map-section">
            <h2 class="section-title">üó∫Ô∏è –ö–∞—Ä—Ç–∞ –ó–∏–º–Ω–µ–≥–æ –ü—É—Ç–∏</h2>
            
            <p style="text-align: center; color: #bbdefb; margin-bottom: 25px; line-height: 1.6;">
                –ò–∑—É—á–∏ –ø—É—Ç—å –ù–∏–∫–∞ —á–µ—Ä–µ–∑ –∑–∏–º–Ω–∏–µ –∑–µ–º–ª–∏
            </p>
            
            <!-- –û–ß–ï–ù–¨ –ö–†–£–ü–ù–ê–Ø –ö–ê–†–¢–ê -->
            <div class="map-container" id="mapContainer">
                <img 
                    src="img/Karta.svg" 
                    alt="–ö–∞—Ä—Ç–∞ –ó–∏–º–Ω–µ–≥–æ –ü—É—Ç–∏" 
                    class="map-image" 
                    id="mapImage"
                >
            </div>
            
            <!-- –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ -->
            <div class="map-description">
                <h3 class="description-title">üìú –õ–µ–≥–µ–Ω–¥–∞ –∫–∞—Ä—Ç—ã</h3>
                <p class="description-text">
                    –≠—Ç–∞ –∫–∞—Ä—Ç–∞ –≤–µ–¥—ë—Ç –ù–∏–∫–∞ —á–µ—Ä–µ–∑ <span class="description-highlight">–∑–∏–º–Ω–∏–µ —á—É–¥–µ—Å–∞</span>. 
                    –ö–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî –Ω–æ–≤–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ: –æ—Ç –∑–∞—Å–Ω–µ–∂–µ–Ω–Ω—ã—Ö –ª–µ—Å–æ–≤ –¥–æ –ª–µ–¥—è–Ω—ã—Ö –ø–µ—â–µ—Ä. 
                    <span class="description-highlight">–°–ª–µ–¥–∏ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º</span> –∏ –æ—Ç–∫—Ä—ã–≤–∞–π –Ω–æ–≤—ã–µ –º–µ—Å—Ç–∞!
                </p>
            </div>
        </section>
    </div>

    <script>
        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ - –î–û–ë–ê–í–õ–ï–ù –î–†–ê–ö–û–ù–ò–ô –ö–†–ò–°–¢–ê–õ–õ
        const itemsDatabase = {
            "–¢—ë–ø–ª–∞—è —Å–≤–µ—á–∞ üïØÔ∏è": {
                icon: "üïØÔ∏è",
                description: "–û—Å–≤–µ—â–∞–µ—Ç –ø—É—Ç—å –≤ —Ç–µ–º–Ω–æ—Ç–µ",
                day: 1,
                rarity: "common"
            },
            "–î—Ä–∞–∫–æ–Ω–∏–π –∫—Ä–∏—Å—Ç–∞–ª–ª üî•": {
                icon: "üî•",
                description: "–ü—ã–ª–∞—é—â–∏–π –∫—Ä–∏—Å—Ç–∞–ª–ª –∏–∑ —Å–µ—Ä–¥—Ü–∞ –¥—Ä–∞–∫–æ–Ω–∞. –°–æ–¥–µ—Ä–∂–∏—Ç –¥—Ä–µ–≤–Ω—é—é –º–∞–≥–∏—é –æ–≥–Ω—è.",
                day: 2,
                rarity: "epic"
            },
            "–ú—ã—à–∫–∞ –Æ–º–∏ üê≠": {
                icon: "üê≠",
                description: "–í–µ—Ä–Ω—ã–π —Å–ø—É—Ç–Ω–∏–∫",
                day: 3,
                rarity: "common"
            },
            "–¢—ë–ø–ª—ã–π –ø–ª–∞—â üß•": {
                icon: "üß•",
                description: "–ó–∞—â–∏—â–∞–µ—Ç –æ—Ç –≤–µ—Ç—Ä–∞",
                day: 4,
                rarity: "common"
            },
            "–ö–æ—Ä–∑–∏–Ω–∞ –¥—Ä–æ–≤ ü™µ": {
                icon: "ü™µ",
                description: "–•–≤–æ—Ä–æ—Å—Ç –¥–ª—è –∫–æ—Å—Ç—Ä–∞",
                day: 5,
                rarity: "common"
            },
            "–ó–≤–µ–∑–¥–æ—á—ë—Ç ‚≠ê": {
                icon: "‚≠ê",
                description: "–ß–∏—Ç–∞–µ—Ç –∑–≤—ë–∑–¥–Ω—ã–µ –∫–∞—Ä—Ç—ã",
                day: 6,
                rarity: "rare"
            },
            "–ó–∏–º–Ω–∏–π –ø–∏—Ä–æ–≥ ü•ß": {
                icon: "ü•ß",
                description: "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∏–ª—ã",
                day: 7,
                rarity: "common"
            },
            "–î–æ–±—Ä–æ–µ —Å–µ—Ä–¥—Ü–µ ‚ù§Ô∏è": {
                icon: "‚ù§Ô∏è",
                description: "–ü–æ–º–æ–≥–∞–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å –¥—Ä—É–∑–µ–π",
                day: 8,
                rarity: "epic"
            },
            "–í–æ–ª—à–µ–±–Ω—ã–π —à–∞—Ä üîÆ": {
                icon: "üîÆ",
                description: "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±—É–¥—É—â–µ–µ",
                day: 9,
                rarity: "rare"
            },
            "–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ üéÅ": {
                icon: "üéÅ",
                description: "–û—Å–æ–±—ã–π –ø–æ–¥–∞—Ä–æ–∫",
                day: 10,
                rarity: "legendary"
            }
        };
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        function loadInventory() {
            const inventoryGrid = document.getElementById('inventoryGrid');
            const totalItems = document.getElementById('totalItems');
            const completedDays = document.getElementById('completedDays');
            const progressPercent = document.getElementById('progressPercent');
            const rareItems = document.getElementById('rareItems');
            
            // –ü–æ–ª—É—á–∞–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–∑ localStorage
            const inventory = JSON.parse(localStorage.getItem('winterAdventureInventory')) || [];
            
            // –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            const progress = JSON.parse(localStorage.getItem('adventProgress')) || { adventDays: {} };
            
            // –°—á–∏—Ç–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            const completedCount = Object.values(progress.adventDays || {})
                .filter(day => day.completed).length;
            
            // –°—á–∏—Ç–∞–µ–º —Ä–µ–¥–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã
            const rareCount = inventory.filter(item => {
                const itemData = itemsDatabase[item.name] || itemsDatabase[item];
                return itemData && itemData.rarity !== "common";
            }).length;
            
            totalItems.textContent = inventory.length;
            completedDays.textContent = completedCount;
            progressPercent.textContent = Math.round((completedCount / 10) * 100) + '%';
            rareItems.textContent = rareCount;
            
            // –û—á–∏—â–∞–µ–º —Å–µ—Ç–∫—É
            inventoryGrid.innerHTML = '';
            
            if (inventory.length === 0) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ "–ø—É—Å—Ç–æ"
                inventoryGrid.innerHTML = `
                    <div class="empty-state">
                        <div style="font-size: 80px; margin-bottom: 20px;">üéí</div>
                        <h3>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</h3>
                        <p>–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ, —á—Ç–æ–±—ã —Å–æ–±–∏—Ä–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã!</p>
                        <a href="index.html#advent-section" style="
                            display: inline-block;
                            margin-top: 20px;
                            padding: 12px 30px;
                            background: linear-gradient(145deg, #4caf50, #2e7d32);
                            color: white;
                            text-decoration: none;
                            border-radius: 8px;
                            font-family: 'Pixelify Sans', sans-serif;
                        ">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–¥–∞–Ω–∏—è–º ‚Üí</a>
                    </div>
                `;
                return;
            }
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø—Ä–µ–¥–º–µ—Ç—ã –ø–æ –¥–Ω—é –ø–æ–ª—É—á–µ–Ω–∏—è
            const sortedItems = [...inventory].sort((a, b) => {
                const itemDataA = itemsDatabase[a.name] || itemsDatabase[a];
                const itemDataB = itemsDatabase[b.name] || itemsDatabase[b];
                const dayA = itemDataA?.day || 0;
                const dayB = itemDataB?.day || 0;
                return dayA - dayB;
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ–¥–º–µ—Ç—ã –≤ —Å–µ—Ç–∫—É
            sortedItems.forEach((itemObj, index) => {
                let itemName, itemData;
                
                // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∫ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (–æ–±—ä–µ–∫—Ç) –∏–ª–∏ —Å—Ç–∞—Ä—ã–π (—Å—Ç—Ä–æ–∫–∞)
                if (typeof itemObj === 'object' && itemObj.name) {
                    itemName = itemObj.name;
                    // –ò—â–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±—ä–µ–∫—Ç–∞
                    itemData = itemsDatabase[itemName] || {
                        icon: itemObj.icon || "üéÅ",
                        description: itemObj.description || "–¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç",
                        day: itemObj.day || "?",
                        rarity: itemObj.rarity || "common"
                    };
                } else {
                    itemName = itemObj;
                    itemData = itemsDatabase[itemName] || {
                        icon: "üéÅ",
                        description: "–¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç",
                        day: "?",
                        rarity: "common"
                    };
                }
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–≤–µ—Ç —Ä–∞–º–∫–∏ –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏
                let borderColor = "#2196F3";
                let rarityText = "";
                
                switch(itemData.rarity) {
                    case "rare":
                        borderColor = "#FF9800";
                        rarityText = "‚òÖ";
                        break;
                    case "epic":
                        borderColor = "#9C27B0";
                        rarityText = "‚òÖ‚òÖ";
                        break;
                    case "legendary":
                        borderColor = "#FFD700";
                        rarityText = "‚òÖ‚òÖ‚òÖ";
                        break;
                }
                
                const itemCard = document.createElement('div');
                itemCard.className = 'item-card';
                itemCard.style.borderColor = borderColor;
                itemCard.style.animationDelay = `${index * 0.1}s`;
                
                // –ü–æ–º–µ—á–∞–µ–º –Ω–æ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
                const isNew = checkIfItemIsNew(itemName, itemObj);
                
                itemCard.innerHTML = `
                    ${rarityText ? `<div style="position: absolute; top: 10px; left: 10px; color: ${borderColor}; font-size: 14px;">${rarityText}</div>` : ''}
                    ${isNew ? '<div style="position: absolute; top: 10px; right: 10px; background: #ff9800; color: white; padding: 3px 8px; border-radius: 10px; font-size: 10px;">NEW</div>' : ''}
                    
                    <div class="item-icon">${itemData.icon}</div>
                    <div class="item-name">${itemName}</div>
                    <div class="item-description">${itemData.description}</div>
                    <div class="item-day">–î–µ–Ω—å ${itemData.day}</div>
                `;
                
                // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                itemCard.addEventListener('mouseenter', () => {
                    itemCard.style.transform = 'translateY(-10px)';
                    itemCard.style.boxShadow = `0 15px 30px ${borderColor}40`;
                });
                
                itemCard.addEventListener('mouseleave', () => {
                    itemCard.style.transform = 'translateY(0)';
                    itemCard.style.boxShadow = 'none';
                });
                
                inventoryGrid.appendChild(itemCard);
            });
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–æ–≤—ã–π –ª–∏ –ø—Ä–µ–¥–º–µ—Ç
        function checkIfItemIsNew(itemName, itemObj) {
            const lastAdded = localStorage.getItem('lastAddedItem');
            if (lastAdded) {
                const [name, timestamp] = lastAdded.split('|');
                if (name === itemName) {
                    const timeDiff = Date.now() - parseInt(timestamp);
                    return timeDiff < 3600000; // 1 —á–∞—Å
                }
            }
            
            // –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ timestamp –≤ –æ–±—ä–µ–∫—Ç–µ
            if (itemObj && itemObj.timestamp) {
                const timeDiff = Date.now() - itemObj.timestamp;
                return timeDiff < 3600000; // 1 —á–∞—Å
            }
            
            return false;
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
            loadInventory();
            
            console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Ä—Ç—ã...');
            const mapImage = document.getElementById('mapImage');
            
            // –ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å
            mapImage.onload = function() {
                console.log('‚úÖ –ö–∞—Ä—Ç–∞ Karta.svg —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –∫–∞—Ä—Ç
                if (this.naturalWidth > 2000) {
                    this.style.maxHeight = '650px';
                }
            };
            
            // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
            mapImage.onerror = function() {
                console.log('‚ùå –§–∞–π–ª Karta.svg –Ω–µ –Ω–∞–π–¥–µ–Ω');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥–ª—É—à–∫—É
                const container = document.getElementById('mapContainer');
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #bbdefb; width: 100%;">
                        <div style="font-size: 80px; margin-bottom: 20px;">üó∫Ô∏è</div>
                        <h3 style="color: #ffcc80; font-size: 28px;">–ö–∞—Ä—Ç–∞ –ó–∏–º–Ω–µ–≥–æ –ü—É—Ç–∏</h3>
                        <p style="margin: 15px 0; font-size: 18px;">–ü–æ–ª–æ–∂–∏—Ç–µ —Ñ–∞–π–ª <strong>Karta.svg</strong> –≤ –ø–∞–ø–∫—É</p>
                        <div style="background: rgba(255,255,255,0.1); 
                                    padding: 20px; 
                                    border-radius: 10px; 
                                    margin: 25px 0;
                                    font-family: monospace;
                                    color: #90a4ae;
                                    font-size: 16px;">
                            –§–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ, —á—Ç–æ –∏ —ç—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞<br>
                            –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞: <strong>Karta.svg</strong>
                        </div>
                    </div>
                `;
            };
            
            console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
            window.addEventListener('focus', loadInventory);
        });
    </script>
</body>
</html>